[
  {
    "objectID": "district_adm_plots.html",
    "href": "district_adm_plots.html",
    "title": "An Overview of Oregon’s State Funding Allocation",
    "section": "",
    "text": "In Oregon, state and local revenues are pooled together and redistributed to school districts based on a funding formula. Approximately 60% of the total education budget comes from the state’s share, making it a critical revenue source for most districts. The State School Fund (SSF) allocates lump-sum funding to districts based on the number of resident students, adjusted for differential needs as specified by the Oregon Revised Statutes (ORS 327.008). Students with disabilities are double-weighted in the funding formula, with districts guaranteed double-weighted funding for up to 11% of their student population. Other student groups, such as students classified as English Language Learners or those qualifying for Free-or-reduced price lunch are also proportionately weighted in the formula. While state allocations are tied to student demographics, districts have the flexibility to use these revenues as they see fit.\nAnother state fiscal policy to support students with disabilities is the High-Cost Disability Fund, which reimburses districts for expenses exceeding $30,000 per special education student (the cap was at $25,000 from 2003-2005). Each year, a portion of the SSF, amounting to less than 5% of the total appropriation, is designated for this fund. If statewide claims exceed the available funds, reimbursements are prorated across districts.\nIn this analysis, I will describe descriptive trends in district enrollment, districts’ state-funding allocation, district revenue, and district expenditure related to students with disabilities whose services cost more than a given threshold and are paid by the grant called High-Cost Disability Fund."
  },
  {
    "objectID": "district_adm_plots.html#district-adm-data",
    "href": "district_adm_plots.html#district-adm-data",
    "title": "An Overview of Oregon’s State Funding Allocation",
    "section": "District ADM Data",
    "text": "District ADM Data\nDistrict-level allocations from the State School Fund (SSF), disaggregated by student type, covering the years 2011–2024.\n\nTrends in Enrollment\n\n\n\n\n\n\n\n\n\nAn average Oregon school districts’ enrollment is around 2800 students- which remains pretty stable across the years. However, there is substantial variation in enrollment between districts.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nState Trends for Subgroup Enrollment\n\n\n\n\n\n\n\n\n\nThe three biggest groups are students under poverty, students served in special education and in English language programs.\nIn 2011, about 16% of the all students were under poverty, 14% of all students were in special education programs and 9% of students were in the ESL programs. In 2024, students served in special education was the biggest group at 15% followed by students under poverty and students in ELP at around 12%. About 1% of the students are in other programs.\n\n\nDistrict Trends for Subgroup Enrollment\nNext, we look at the trends percentage of subgroup representation across districts over time.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nStudents in special education (IEP or students with an Individualized Education Plans) and English language programs have been steadily growing over the years, and those classified in poverty are steadily decreasing, but there is plenty of between-district variation.\nBetween 0 to 3% of students were classified as HCD (eligible for High Cost Disability Fund) between districts between 2018 to 2022.\n\n\nRelationship between Districts Total Enrollment and Subgroup Enrollment\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFor students with an IEP and student in poverty, there is variation in proportion of the subgroup relative to the school enrollment. However, the average sub-group representation by quintiles of school enrollment appears even, at between 12-16%. A handful of school districts with an enrollment of around 10 students served no special education students in their districts in 2022. Some of the low-enrollment schools have high representation of students in poverty.\nStudents in ESL programs, and those in foster care or neglected/delinquent, pregnant and parenting programs, and those eligible for reimbursements from the high-cost disability funds are more concentrated in bigger schools."
  },
  {
    "objectID": "district_adm_plots.html#district-funds-allocation-data",
    "href": "district_adm_plots.html#district-funds-allocation-data",
    "title": "An Overview of Oregon’s State Funding Allocation",
    "section": "District Funds Allocation Data",
    "text": "District Funds Allocation Data\nI define allocation ratio as the ratio of weighted average daily membership to the real average daily membership. Since students with some characteristics are weighted more than 1 per the state formula, a district gets resources as if there were more students in the school. So, an allocation ratio of 2 means that districts get 2 student equivalent for every 1 real student in their district.\n\n\n\n\n\n\n\n\n\nStudents in smaller school districts get more per-student revenue allocated (in student units) than students in larger districts. In the first enrollment quintile, school districts get about 4 student equivalent for each of their student. In the second quintile, school districts get about 2 student equivalent for each of their student. In larger districts, school districts get 1.3 student equivalent for each of their student."
  },
  {
    "objectID": "district_adm_plots.html#revenue-data",
    "href": "district_adm_plots.html#revenue-data",
    "title": "An Overview of Oregon’s State Funding Allocation",
    "section": "Revenue Data",
    "text": "Revenue Data\n\nState Trends in Per-pupil revenue\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSchool districts had an average total revenue of 18 billion dollars for the four years I had publically-available data. Of the total revenue, between 28-33% came from State resources, 23-25% came from local resources, and 35-40% came from Other resources. Intermediate and federal resources accounted for the remaining.\nAlmost all of state revenue is allocated using the SSF. Local revenue could be tax levies etc. The biggest contributor to Other resources are districts’ account balance from previous years – thus, districts saved substantial money from past years. The decrease in other sourcecs over the 4 years could be related to using emergency resources in response to COVID-19 related disruptions.\nIf we remove the other sources and only consider the new money districts get, about 50% comes from state resources and 40 percent come from local resources. Between 6 to 10% percent come from federal sources.\n\n\nTrends in Per-pupil revenue by Districts based on sources\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThe average per-pupul revenue from all sources, except intermediate, went up from 2019 to 2022. Although the most dramatic increase in revenue was from federal sources, which went up about three times between 2019 to 2021. Revenue from local and intermediate sources remained more consistent over time.\n\n\nTrends in Revenue by District Enrollment\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDistricts with smaller enrollment have a much higher per-pupil revenue from all sources compared to big districts. The most dramatic difference is in per-pupil revenue by other sources."
  },
  {
    "objectID": "district_adm_plots.html#hcd-population",
    "href": "district_adm_plots.html#hcd-population",
    "title": "An Overview of Oregon’s State Funding Allocation",
    "section": "HCD Population",
    "text": "HCD Population\n\nStudents eligible for HCD and Grant Amount\n\n\n\n\n\n\n\n\n\nThe number of students identified as eligible for ‘High Cost Disability Fund’ have doubled from 2003 to 2022, or from 0.5% of the enrollment in 2003 to 1% in 2022. The grant money has also increased in phases. The drop in the number of students eligible for HCD in 2005 is because the eligibility threshold for expenditure increased from 25k to 30k in 2005.\n\n\nStudents eligible for HCD and Per-pupil expenditure above threshold\n\n\n\n\n\n\n\n\n\nPer-pupil expenditure over the threshold was 9000 in 2003 and was 25000 in 2022.\n\n\nPer-pupil reimbursment and Per-pupil expenditure above threshold\n\n\n\n\n\n\n\n\n\nReimbursement hasn’t increases as much as the expenses. The gap in per-student expenditure vs reimbursement was $3k in 2003 and it was 15k in 2022."
  },
  {
    "objectID": "code_explanation.html",
    "href": "code_explanation.html",
    "title": "Scraping Over 2000 PDF Pages!",
    "section": "",
    "text": "One of the data sources I worked on for the project were public documentation from the Oregon Department of Education (ODE) that detailed state funds allocation to school districts by student types. This document came in the form of structured .pdfs. The primary ‘Data Sciency’ task I undertook during the capstone was to scrape 14 pdfs of 233 pages each.\n\nIn this section, I explain the logic of the text-scraping code. All these functions are found in the code/ folder. \nLet’s start by looking at one pdf page.\n\n\n\n\n\n\n\n\n\n\nThe first step is the read the pdf as a dataframe.\n\n\n\n\nAs parameter, I pass the relative file path where the pdf is saved.\n\n\n\n\nI use the pdf_text() function from the pdftools package which converts each pdf page into an object of type string.\n\n\n\n\nThen, I apply a series of cleaning process across each page-character object using the map2_dfr() function from the purr package.\n\n\n\n\nThe cleaning steps include breaking the string into different lines separating at next line delimiter, removing white spaces, and multiple spaces in each line, and changing the hyphen symbol.\n\n\n\n\nNow each line of each page is a different character object. I collapse all of them into a single dataframe.\n\n\n\n\nIn the next function, I find lines corresponding to district enteries so that I can leverage the structure.\n\n\n\n\nThen, I split the dataframe by district, so that each district has all its lines in a separate object.\n\n\n\n\nThis function shows the steps to extract information from lines related to a single district.\n\n\n\n\nThe function parameters is a district-specific dataframe, created above.\n\n\n\n\nI classify all the lines in accordance with the structure.\n\n\n\n\nThen, I use regular expressions to extract key details based on information_type\n\n\n\n\nAnother instance where I used a regular expressions to extract key details\n\n\n\n\nLastly, I organize this information as a dataframe.\n\n\n\n\nLastly, I organize this information as a dataframe.\n\n\n\n\n\n\n\nscrape_pdf_data &lt;- function(file_path) {\n\n  file_text_lines &lt;- pdf_text(file_path) %&gt;%\n    map2_dfr(., 1:length(.), ~ {\n      text &lt;- strsplit(.x, \"\\n\")[[1]]\n      text &lt;- text[!grepl(\"^\\\\s*$\", text)]\n      text &lt;- gsub(\"^\\\\s\\\\s+\", \"\", text)\n      text &lt;- gsub(\"\\\\s+\", \" \", text)\n      text &lt;- gsub(\"‐\", \"-\", text)\n\n      page_df &lt;- data.frame(text = text, page = .y)\n\n      return(page_df)\n    })\n\n  [...]\n}\n\n\n\n\nscrape_pdf_data &lt;- function(file_path) {\n  [...]\n  \n  get_district_lines &lt;- file_text_lines %&gt;%\n    mutate(district_id_found = as.integer(grepl(\"District ID:\", text)))\n    select(page, district_id_found) %&gt;%\n    distinct() %&gt;%\n    filter(district_id_found == 1) %&gt;%\n    mutate(district_index = row_number()) %&gt;%\n    select(-district_id_found) %&gt;%\n    full_join(tibble(page = 1:max(file_text_lines$page)), by = \"page\") %&gt;%\n    arrange(page) %&gt;%\n    fill(district_index, .direction = \"down\")\n\n  district_year_list &lt;- file_text_lines %&gt;%\n    left_join(get_district_lines) %&gt;%\n    split(., .$district_index)\n\n  return(district_year_list)\n}\n\n\n\n\none_district_info &lt;- function(district_df) {\n  district_df &lt;- district_df %&gt;%\n    mutate(\n      information_type = case_when(\n        grepl(\"District ID\", text) ~ \"district_info\",\n        # adding as files from 2014 onwards have this in the entry name\n        grepl(\"for funding calculation|information only\", text) ~ \"entry_name\",\n        grepl(\":\", text) ~ \"category_info\",\n        grepl(\"ADMw\", text) ~ \"total\",\n        TRUE ~ \"entry_name\"\n      )\n    )  %&gt;%\n    mutate(entry_index = cumsum(information_type == \"entry_name\"))\n  \n  # grab district level info\n  district_details &lt;- district_df %&gt;%\n    filter(information_type == \"district_info\") %&gt;%\n    select(text) %&gt;%\n    unlist() %&gt;%\n    str_match(., \"^(.*?),\\\\s*(.*?)\\\\s*District ID:\\\\s*(\\\\d+)$\")\n   \n  [...]\n\n\n\n\n# grab each entry-level information\none_district_info &lt;- function(district_df) {\n  [...]\n  entry_category_information &lt;- district_df %&gt;%\n    filter(entry_index != 0) %&gt;%\n    split(., .$entry_index) %&gt;%\n    map_dfr(., ~ {\n      # pattern different for 2024, no = sign\n      category_pattern &lt;-  \"(.*):\\\\s*(-?[\\\\d,]+\\\\.\\\\d+)?\\\\s*X\\\\s*(-?[\\\\d.]+)\n      \\\\s*=?\\\\s*(-?[\\\\d,]+\\\\.\\\\d+)?\\\\s*(-?[\\\\d,]+\\\\.\\\\d+)?\\\\s*X\\\\s*(-?[\\\\d.]+)\n      \\\\s*=?\\\\s*(-?[\\\\d,]+\\\\.\\\\d+)?\"\n      \n      \n      .x %&gt;%\n        filter(information_type == \"category_info\") %&gt;%\n        select(text) %&gt;%\n        unlist() %&gt;%\n        str_match(., category_pattern) %&gt;%\n        as.data.frame() %&gt;%\n        select(-V7) %&gt;%\n        rename(\n          \"org_text\" = \"V1\",\n          \"category\" = \"V2\",\n          \"current_year_adm\" = \"V3\",\n          \"category_weight\" = \"V4\",\n          \"current_year_admw\" = \"V5\",\n          \"past_year_adm\" = \"V6\",\n          \"past_year_admw\" = \"V8\"\n        ) \n    )\n  \n  [...]\n}\n\n\n\n\n\n\nI go through this process for all pdfs. Now, Let’s walk-through the steps using an example."
  },
  {
    "objectID": "code_explanation2.html",
    "href": "code_explanation2.html",
    "title": "Run-Through Example",
    "section": "",
    "text": "One of the data sources I worked on for the project were public documentation from the Oregon Department of Education (ODE) that detailed state funds allocation to school districts by student types. This document came in the form of structured .pdfs. The primary ‘Data Sciency’ task I undertook during the capstone was to scrape 14 pdfs of 233 pages each.\n In this section, I will walkthrough an example of scraping data for one district. All these functions are found in the code/ folder. \nLet’s start by looking at one pdf page.\n\n\n\n\n\n\nLet’s see the intermediate steps for transforming the data.\n\n\n\n\n\nFrom the pdf, I get to a dataframe of each line.\n\n\n\n\nThen, I create a list of 197 dataframes corresponding to informaion associated with each Oregon school district.\n\n\n\n\nI classify each line leveraging the structure.\n\n\n\n\nUsing the line classified as district_info, I grabbed the district details.\n\n\n\n\nThe resulting dataframe for one school district after applying the regular expressions rules.\n\n\n\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n     [,1]                                          [,2]           [,3]         \n[1,] \"Baker County, Baker SD 5J District ID: 1894\" \"Baker County\" \"Baker SD 5J\"\n     [,4]  \n[1,] \"1894\"\n\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\nAnd then repeating it over across all districts, and all years."
  },
  {
    "objectID": "background.html",
    "href": "background.html",
    "title": "Project Context",
    "section": "",
    "text": "An overview of United State’s education funding."
  },
  {
    "objectID": "background.html#explore-the-197-oregon-school-districts",
    "href": "background.html#explore-the-197-oregon-school-districts",
    "title": "Project Context",
    "section": "Explore the 197 Oregon School Districts",
    "text": "Explore the 197 Oregon School Districts"
  }
]